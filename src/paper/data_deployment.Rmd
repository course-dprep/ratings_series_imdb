---
title: "Final Report"
author: "Group 1"
date: "2024-09-18"
output: 
    html_document:
        self_contained: TRUE
        output_file: "Data_Deployment.html"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
### Setup ###
# Loading Libraries
library(dplyr)
library(tidyverse)
library(readr)
library(here)
library(tidyr)
library(broom)
library(kableExtra)
```
# Research Motivation

User ratings are found to be a key success factor of series and help production companies gain financial success (Hsu et al., 2014). As such, it is important to determine what factors influence these ratings, in order to develop series that are most likely to receive high ratings. The length of an individual episode is found to have a significant effect on the rating on that episode (Danaher et al., 2011). However, how the length of the complete series influences the rating of the episodes remains unexplored. This study fills the gap in the literature by exploring the following research question: 

How does the length of a TV show affect the average rating of a TV show episodes?

# Research Method

The chosen research method for the mentioned research question is a regression analysis. This research method will be suitable to investigate the relation between the following variables: the length of a TV show and the episode ratings. Performing a regression analysis allows us to determine if the length of a TV show significantly affects the ratings of its episodes and to learn more about the direction of the relationship.

To perform the regression analysis we will make use of the following data sets: 1. title.episode.tsv.gz a. To find the series and the episodes 2. title.ratings.tsv.gz a. Average rating of individual users combined 3. title.basics.tsv.gz a. Genre for cross reference


```{r echo=FALSE, message=FALSE, warning=FALSE}
# Results:
### Input ###
#Creating the data variable
data <- read_csv(here("gen", "data_preparation", "output", "cleaned_data.csv"))

### Transformation/Output ###
## Code for ggplot: Average Rating Episode Number
average_rating <- data %>%
  group_by(episode_number) %>%
  summarise(avg_rating = mean(rating, na.rm = TRUE))

ggplot(average_rating, aes(x = episode_number, y = avg_rating)) + 
  geom_line() + 
  labs(title = "Average Rating by Episode Number", x = "Episode Number", y = "Average Rating")

### Linear regression model
# Create function to do the regression analysis and make a table for the report
run_regression_analysis <- function(data) {
  model <- lm(rating ~ series_runtime, data = data)
  
  # Extract a clean data frame of the results
  tidy_model <- tidy(model)
  
  # Generate a proper table for in the report
  tidy_table <- kable(
    tidy_model, 
    format = "html",
    caption = "Regression Analysis: Rating vs Series Runtime",
    col.names = c("Term", "Estimate", "Standard Error", "Statistic", "P-value")
  ) %>%
    kable_styling(full_width = FALSE, position = "center")
  
    return(tidy_table)
}
run_regression_analysis(data)

#### Relationship between runtime and ratings
ggplot(data, aes(x = episode_minutes, y = rating)) + 
  geom_point(alpha = 0.5) + 
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  labs(title = "Relationship Between Episode Runtime and Ratings", x = "Episode Runtime (minutes)", y = "Rating")

##### Votes by season 
season_votes <- data %>%
  group_by(season_number) %>%
  summarise(total_votes = sum(n_votes, na.rm = TRUE))

ggplot(season_votes, aes(x = as.factor(season_number), y = total_votes)) + 
  geom_bar(stat = "identity", fill = "dodgerblue") + 
  labs(title = "Total Votes by Season", x = "Season Number", y = "Total Votes")
```

# Theoretical / Practical Implications

## Theoretical implications
This study contributes to academic understanding by filling a gap in literature by extending knowledge on how structural elements (such as series length) impact viewer reception and ratings. Additionally, this study could offer new insights into media theory, particularly how content structure (series length) might influence viewer satisfaction. These findings can contribute to broader discussions on media consumption. 

## Practical implications
This study could impact industry practices, especially in the TV and media production field. Production companies can use this information to tailor their series' structure. For example, they could optimize series length to match viewer preferences and improve engagement and ratings. Additionally, streaming services that release entire seasons at once could benefit from this study to predict viewer behavior and ratings based on series length, helping them decide how to structure their release strategies. On top of that, since ratings are linked to financial success, as mentioned in the motivation (Hsu et al., 2014), this study could help companies maximize returns by aligning series length with audience expectations, ultimately boosting viewership and profitability

# Conclusion
This study aimed to investigate the relationship between the length of a TV show and the average ratings of its episodes. The analysis employed several visualizations and a linear regression model that visualized the evaluating of this relationship. 

1) The ggplot for the Average Rating by Episode Numbers indicates that the viewer ratings tend to fluctuate throughout the season of a TV show. Such fluctuations may suggest varying audience engagement levels or possible shifts in episode quality. 
2) The linear regressions shows that the number of votes and the episode length both significantly influence the viewer ratings. Each additional vote increases the average rating slightly, as well as each extra minute of runtime. 
3) The third displayed results shows the relationship between episode runtime and ratings. This plot illustrates a positive correlation, suggesting that longer episodes tend to receive higher ratings on average. This increase in viewer satisfaction can possibly be explained by the fact that increased runtime may facilitate more comprehensive stroytelling and thus character exploration. 
4) The final result shows the total votes by season in a bar chart. The chart visualized that audience engagement differs across the different seasons of a TV show. Which displays the challenge of keeping the audience engaged with the TV show over a longer period of time. 

The mentioned results contributed to the conclusion of the research question. To summarize, a longer TV episode can positively effect the rating of the show. A longer episode thus in general leads to a higher rating. On the other hand, does an increase in the number of seasons generally lead to less customer engagement and less positive ratings. The findings emphasize the importance of strategic planning in episode and season length to maximize viewer satisfaction and ratings.